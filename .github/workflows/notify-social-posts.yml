name: ðŸš€ Notify new Bluesky posts to Telegram

on:
  push:
    branches: [ main ]
    paths:
      - 'data/posts_*.json'
      - '.github/workflows/notify-social-posts.yml'

concurrency:
  group: notify-social-posts
  cancel-in-progress: false

jobs:
  notify-social-posts:
    runs-on: ubuntu-latest
    steps:
      - name: ðŸ”„ Checkout repository
        uses: actions/checkout@v5
        with:
          fetch-depth: 2

      - name: ï¿½ Detect and send new posts to Telegram
        env:
          TELEGRAM_BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}
        run: |
          chmod +x scripts/notify/notify_social_posts.sh
          ./scripts/notify/notify_social_posts.sh

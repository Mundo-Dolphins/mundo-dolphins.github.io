{{ define "main" }}
<!-- Configuraci√≥n PWA segura inyectada desde GitHub Secrets -->
<script>
{{- $vapidKey := getenv "VAPID_PUBLIC_KEY" -}}
window.PWA_SECURE_CONFIG = window.PWA_SECURE_CONFIG || {};
window.PWA_SECURE_CONFIG.environment = "{{ hugo.Environment }}";
window.PWA_SECURE_CONFIG.buildTime = {{ now.Unix }};
{{ if $vapidKey -}}
window.PWA_SECURE_CONFIG.vapidKey = "{{ $vapidKey }}";
window.PWA_SECURE_CONFIG.hasVapidFromEnv = true;
console.log('üîê VAPID key cargada desde variable de entorno');
{{ else -}}
window.PWA_SECURE_CONFIG.hasVapidFromEnv = false;
console.log('üîß Modo desarrollo - VAPID key se cargar√° din√°micamente');
{{ end -}}
</script>

<!-- Script PWA Meta Injector -->
<script src="/js/pwa-meta-injector.js"></script>

<main class="main" role="main">
    <article class="post">
        
        <header class="post__header">
            <h1 class="post__title">{{ .Title }}</h1>
            {{ $format := "02-01-2006 15:04" }}
            <div>Publicado: {{ partial "fecha-es.html" .Date }}</div>
            <div>Autor: <a href="{{ .Params.AuthorLink }}">{{ .Params.Author }}</a></div>
        </header>
        
        <div class="content post__content clearfix">
            {{ .Content }}
        </div>
    </article>
</main>
{{ partial "authorbox.html" . }}
{{ partial "social-share.html" . }}

<!-- Script para funcionalidad de social share -->
{{ partial "social-share-script.html" . }}

{{ end }}